---
// Importar el carrito para obtener la cantidad
import { prisma } from "../lib/db";

// Obtener cantidad de items en el carrito
let cartItemCount = 0;
try {
  const cart = await prisma.cart.findFirst({
    include: {
      items: true
    }
  });
  cartItemCount = cart?.items.reduce((total, item) => total + item.qty, 0) || 0;
} catch (error) {
  console.log('Error al obtener carrito:', error);
}
---

<header role="banner">
  <!-- Hero Fullscreen -->
  <div class="hero-section">
    <!-- Imágenes de fondo con carrusel -->
    <div class="hero-background">
      <div class="hero-image active" data-slide="0"></div>
      <div class="hero-image" data-slide="1"></div>
      <div class="hero-image" data-slide="2"></div>
      <div class="hero-image" data-slide="3"></div>
      <div class="hero-image" data-slide="4"></div>
      <div class="hero-overlay"></div>
    </div>

    <!-- Menú hamburguesa -->
    <button 
      class="menu-toggle" 
      aria-label="Abrir menú de navegación"
      aria-expanded="false"
      role="button"
      tabindex="0"
    >
      <span class="hamburger-line"></span>
      <span class="hamburger-line"></span>
      <span class="hamburger-line"></span>
    </button>

    <!-- Carrito -->
    <button 
      class="cart-button" 
      aria-label="Ver carrito de compras"
      role="button"
      tabindex="0"
      data-cart-count={cartItemCount}
    >
      <svg class="cart-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M7 4V2C7 1.45 7.45 1 8 1H16C16.55 1 17 1.45 17 2V4H20C20.55 4 21 4.45 21 5S20.55 6 20 6H19V19C19 20.1 18.1 21 17 21H7C5.9 21 5 20.1 5 19V6H4C3.45 6 3 5.55 3 5S3.45 4 4 4H7ZM9 3V4H15V3H9ZM7 6V19H17V6H7Z" fill="currentColor"/>
        <path d="M9 8V17H11V8H9ZM13 8V17H15V8H13Z" fill="currentColor"/>
      </svg>
      {cartItemCount > 0 && (
        <span class="cart-badge" aria-label={`${cartItemCount} productos en el carrito`}>
          {cartItemCount}
        </span>
      )}
    </button>

    <!-- Contenido principal -->
    <div class="hero-content">
      <div class="hero-text">
        <h1 class="hero-title">Tienda Web</h1>
        <p class="hero-subtitle">Descubre nuestra colección premium de moda y accesorios</p>
        
        <!-- Beneficios -->
        <div class="benefits-container">
          <div class="benefit-chip" role="img" aria-label="Envío gratis">
            <svg class="benefit-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M20 8H17V4H3C1.9 4 1 4.9 1 6V17H3C3 18.66 4.34 20 6 20S9 18.66 9 17H15C15 18.66 16.34 20 18 20S21 18.66 21 17H23V12L20 8ZM6 18.5C5.17 18.5 4.5 17.83 4.5 17S5.17 15.5 6 15.5 7.5 16.17 7.5 17 6.83 18.5 6 18.5ZM18 18.5C17.17 18.5 16.5 17.83 16.5 17S17.17 15.5 18 15.5 19.5 16.17 19.5 17 18.83 18.5 18 18.5ZM17 12V9.5H19.5L21.46 12H17Z" fill="currentColor"/>
            </svg>
            <span>Envío Gratis</span>
          </div>
          
          <div class="benefit-chip" role="img" aria-label="Pago seguro">
            <svg class="benefit-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M20 4H4C2.9 4 2.01 4.9 2.01 6L2 18C2 19.1 2.9 20 4 20H20C21.1 20 22 19.1 22 18V6C22 4.9 21.1 4 20 4ZM20 18H4V8H20V18ZM20 6H4V6H20V6Z" fill="currentColor"/>
              <path d="M6 10H18V12H6V10ZM6 14H14V16H6V14Z" fill="currentColor"/>
            </svg>
            <span>Pago Seguro</span>
          </div>
          
          <div class="benefit-chip" role="img" aria-label="Calidad premium">
            <svg class="benefit-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M12 2L13.09 8.26L22 9L13.09 9.74L12 16L10.91 9.74L2 9L10.91 8.26L12 2Z" fill="currentColor"/>
            </svg>
            <span>Calidad Premium</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Indicadores del carrusel -->
    <div class="carousel-indicators" role="tablist" aria-label="Navegación del carrusel de imágenes">
      <button 
        class="carousel-indicator active" 
        data-slide="0" 
        aria-label="Mostrar imagen 1"
        aria-selected="true"
        role="tab"
        tabindex="0"
      ></button>
      <button 
        class="carousel-indicator" 
        data-slide="1" 
        aria-label="Mostrar imagen 2"
        aria-selected="false"
        role="tab"
        tabindex="0"
      ></button>
      <button 
        class="carousel-indicator" 
        data-slide="2" 
        aria-label="Mostrar imagen 3"
        aria-selected="false"
        role="tab"
        tabindex="0"
      ></button>
      <button 
        class="carousel-indicator" 
        data-slide="3" 
        aria-label="Mostrar imagen 4"
        aria-selected="false"
        role="tab"
        tabindex="0"
      ></button>
      <button 
        class="carousel-indicator" 
        data-slide="4" 
        aria-label="Mostrar imagen 5"
        aria-selected="false"
        role="tab"
        tabindex="0"
      ></button>
    </div>

    <!-- Botón eliminado - reemplazado por sección destacada -->
  </div>

</header>

<style>
  /* Variables CSS para el header */
  :root {
    --hero-bg-color: #d3d1b6;
    --hero-overlay: rgba(0, 0, 0, 0.5);
    --hero-text-color: #ffffff;
    --hero-accent: #8b7355;
    --hero-glass: rgba(255, 255, 255, 0.1);
    --hero-border: rgba(255, 255, 255, 0.2);
    --hero-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
  }

  /* HEADER */
  header {
    width: 100%;
    height: 60vh;
    min-height: 400px;
    max-height: 600px;
    position: relative;
    overflow: hidden;
  }

  /* HERO SECTION */
  .hero-section {
    position: relative;
    width: 100%;
    height: 60vh;
    min-height: 400px;
    max-height: 600px;
    overflow: hidden;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1;
  }

  /* ===== ESTILOS MODO MÓVIL ===== */
  
  /* Fondo del hero */
  .hero-background {
    position: absolute;
    inset: 0;
    z-index: -2;
    overflow: hidden;
  }

  .hero-image {
    width: 100%;
    height: 100%;
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    opacity: 0;
    transition: opacity 1.5s ease-in-out;
    position: absolute;
    inset: 0;
    filter: brightness(0.7) contrast(1.1);
  }

  .hero-image::before {
    content: '';
    position: absolute;
    inset: 0;
    background: rgba(0, 0, 0, 0.3);
    z-index: 1;
  }

  .hero-image.active {
    opacity: 1;
  }

  /* Imágenes específicas del carrusel */
  .hero-image:nth-child(1) {
    background-image: url('/img/upper-dama-header.png');
  }

  .hero-image:nth-child(2) {
    background-image: url('/img/hombre-header.png');
  }

  .hero-image:nth-child(3) {
    background-image: url('/img/header-ninos.png');
  }

  .hero-image:nth-child(4) {
    background-image: url('/img/zapatillas-gif.gif');
  }

  .hero-image:nth-child(5) {
    background-image: url('/img/acesorios-header.png');
  }

  .hero-overlay {
    position: absolute;
    inset: 0;
    background: linear-gradient(
      180deg, 
      rgba(0, 0, 0, 0.5) 0%, 
      rgba(0, 0, 0, 0.7) 30%, 
      rgba(0, 0, 0, 0.8) 70%, 
      rgba(0, 0, 0, 0.9) 100%
    );
    z-index: -1;
  }

  /* Menú hamburguesa */
  .menu-toggle {
    position: fixed;
    top: 20px;
    left: 20px;
    background: var(--hero-glass);
    border: 2px solid var(--hero-border);
    border-radius: 12px;
    width: 50px;
    height: 50px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 4px;
    cursor: pointer;
    backdrop-filter: blur(10px);
    transition: all 0.3s ease;
    z-index: 1000;
  }

  .hamburger-line {
    width: 20px;
    height: 2px;
    background: var(--hero-text-color);
    transition: all 0.3s ease;
    border-radius: 1px;
  }

  .menu-toggle:hover {
    background: rgba(255, 255, 255, 0.2);
    transform: scale(1.05);
  }

  .menu-toggle:focus {
    outline: 2px solid var(--hero-accent);
    outline-offset: 2px;
  }

  /* Carrito */
  .cart-button {
    display: none; /* Ocultar porque usamos el botón del CartSidebar */
  }

  .cart-icon {
    width: 24px;
    height: 24px;
  }

  .cart-badge {
    position: absolute;
    top: -8px;
    right: -8px;
    background: #dc2626;
    color: white;
    border-radius: 50%;
    width: 20px;
    height: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.75rem;
    font-weight: 600;
    border: 2px solid white;
  }

  .cart-button:hover {
    background: rgba(255, 255, 255, 0.2);
    transform: scale(1.05);
  }

  .cart-button:focus {
    outline: 2px solid var(--hero-accent);
    outline-offset: 2px;
  }

  /* Contenido principal */
  .hero-content {
    position: absolute;
    inset: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 10;
    padding: 2rem;
  }

  .hero-text {
    text-align: center;
    max-width: 800px;
    animation: fadeInUp 1s ease-out;
  }

  .hero-title {
    font-size: clamp(2.5rem, 6vw, 4.5rem);
    font-weight: 800;
    margin-bottom: 1rem;
    color: #ffffff;
    text-shadow: 
      0 4px 20px rgba(0, 0, 0, 0.9),
      0 2px 10px rgba(0, 0, 0, 0.7),
      0 1px 5px rgba(0, 0, 0, 0.5);
    line-height: 1.1;
    filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.4));
  }

  .hero-subtitle {
    font-size: clamp(1.1rem, 2.5vw, 1.8rem);
    opacity: 0.95;
    margin-bottom: 2.5rem;
    text-shadow: 
      0 3px 15px rgba(0, 0, 0, 0.8),
      0 2px 8px rgba(0, 0, 0, 0.6),
      0 1px 4px rgba(0, 0, 0, 0.4);
    max-width: 600px;
    line-height: 1.4;
    color: #ffffff;
    filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.3));
  }

  /* Beneficios */
  .benefits-container {
    display: flex;
    gap: 1rem;
    flex-wrap: wrap;
    justify-content: center;
    margin-bottom: 3rem;
    animation: fadeInUp 1s ease-out 0.3s both;
  }

  .benefit-chip {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    background: rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 50px;
    padding: 0.75rem 1.25rem;
    backdrop-filter: blur(15px);
    transition: all 0.3s ease;
    font-size: 0.9rem;
    font-weight: 600;
    color: var(--hero-text-color);
    box-shadow: 
      0 4px 15px rgba(0, 0, 0, 0.3),
      0 2px 8px rgba(0, 0, 0, 0.2);
    text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
  }

  .benefit-chip:hover {
    background: rgba(255, 255, 255, 0.25);
    transform: translateY(-2px);
    box-shadow: var(--hero-shadow);
  }

  .benefit-icon {
    width: 20px;
    height: 20px;
    transition: transform 0.3s ease;
  }

  .benefit-chip:hover .benefit-icon {
    transform: scale(1.1);
  }

  /* Botón scroll eliminado */

  /* Indicadores del carrusel */
  .carousel-indicators {
    position: absolute;
    bottom: 100px;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    gap: 0.5rem;
    z-index: 20;
  }

  .carousel-indicator {
    width: 12px;
    height: 12px;
    border-radius: 50%;
    border: 2px solid rgba(255, 255, 255, 0.5);
    background: transparent;
    cursor: pointer;
    transition: all 0.3s ease;
  }

  .carousel-indicator.active {
    background: var(--hero-text-color);
    border-color: var(--hero-text-color);
    box-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
  }

  .carousel-indicator:hover {
    border-color: var(--hero-text-color);
    transform: scale(1.2);
  }

  /* ===== ESTILOS MODO DESKTOP ===== */

  /* Header Content (Texto) */
  .header-content {
    width: 35%;
    height: 100vh;
    z-index: 2;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0 5%;
  }

  .header-text {
    width: 100%;
    text-align: left;
  }

  .title-slide {
    font-size: 4rem;
    margin-bottom: 1rem;
    text-shadow: 2px 2px 8px rgba(0,0,0,0.5), 0 0 20px rgba(139, 115, 85, 0.3);
    color: #52543c;
    font-weight: 800;
    line-height: 1.1;
  }

  .subtitle-slide {
    font-size: 1.4rem;
    margin-bottom: 2rem;
    color: #52543c;
    opacity: 0.9;
    line-height: 1.4;
  }

  .header-features {
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }

  .feature-item {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 0.75rem 1rem;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 12px;
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.2);
    transition: all 0.3s ease;
  }

  .feature-item:hover {
    background: rgba(255, 255, 255, 0.2);
    transform: translateX(5px);
  }

  .feature-icon {
    font-size: 1.5rem;
  }

  .feature-text {
    font-size: 1rem;
    font-weight: 600;
    color: #52543c;
  }

  /* Imágenes Header (Collage) */
  .imagenes-header {
    display: flex;
    flex-direction: row;
    justify-content: center;
    align-items: flex-end;
    width: 65%;
    height: 100vh;
    position: relative;
  }

  /* Posiciones específicas para cada imagen */
  .imagen-1 {
    position: absolute;
    height: 80%;
    width: 26%;
    clip-path: polygon(47% 0, 100% 0, 62% 83.1%, 10% 69%);
    z-index: 5;
    animation: slideInDiagonal1 1s;
    top: 0;
    left: 0;
  }

  .imagen-2 {
    position: absolute;
    top: 0px;
    left: 17%;
    height: 100%;
    width: 37%;
    clip-path: polygon(27% 0, 87% 0, 48% 80%, 0% 67%);
    z-index: 2;
    animation: slideInDiagonal2 1.1s;
  }

  .imagen-3 {
    width: 50%;
    height: 100%;
    position: absolute;
    left: 36%;
    top: 0;
    clip-path: polygon(29% 0, 79% 0, 47% 100%, 0 81%);
    z-index: 3;
    animation: slideInDiagonal3 1.15s;
  }

  .imagen-4 {
    height: 100%;
    width: 40%;
    top: 0;
    position: absolute;
    left: 58.9%;
    clip-path: polygon(43% 0, 91% 0, 58% 100%, 4% 100%);
    z-index: 2;
    animation: slideInDiagonal4 1.2s;
  }

  .imagen-5 {
    width: 24%;
    height: 100%;
    position: absolute;
    bottom: 0;
    left: 75%;
    clip-path: polygon(90% 0, 100% 0%, 100% 100%, 36% 100%);
    z-index: 1;
    animation: slideInDiagonal5 1.1s;
  }

  /* Sistema de slider para desktop */
  .images {
    position: relative;
    overflow: hidden;
  }

  .image-wrapper {
    position: relative;
    width: 100%;
    height: 100%;
  }

  .slider-img {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    opacity: 0;
    transition: opacity 0.5s ease;
  }

  .slider-img.active {
    opacity: 1;
  }

  .slider-img.exit {
    opacity: 0;
  }

  .slider-indicators {
    position: absolute;
    top: 30px;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    gap: 0.5rem;
    z-index: 10;
  }

  .slider-indicator {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    border: 1px solid rgba(255, 255, 255, 0.5);
    background: transparent;
    cursor: pointer;
    transition: all 0.3s ease;
  }

  .slider-indicator.active {
    background: rgba(255, 255, 255, 0.8);
    border-color: rgba(255, 255, 255, 0.8);
  }

  .slider-indicator:hover {
    border-color: rgba(255, 255, 255, 0.8);
    transform: scale(1.2);
  }

  /* Animaciones */
  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes bounce {
    0%, 20%, 50%, 80%, 100% {
      transform: translateY(0);
    }
    40% {
      transform: translateY(-5px);
    }
    60% {
      transform: translateY(-3px);
    }
  }

  @keyframes slideInDiagonal1 {
    from {
      transform: translateX(-100px) translateY(-50px) rotate(-10deg);
      opacity: 0;
    }
    to {
      transform: translateX(0) translateY(0) rotate(0deg);
      opacity: 1;
    }
  }

  @keyframes slideInDiagonal2 {
    from {
      transform: translateX(-80px) translateY(-30px) rotate(-5deg);
      opacity: 0;
    }
    to {
      transform: translateX(0) translateY(0) rotate(0deg);
      opacity: 1;
    }
  }

  @keyframes slideInDiagonal3 {
    from {
      transform: translateX(-60px) translateY(-20px) rotate(5deg);
      opacity: 0;
    }
    to {
      transform: translateX(0) translateY(0) rotate(0deg);
      opacity: 1;
    }
  }

  @keyframes slideInDiagonal4 {
    from {
      transform: translateX(-40px) translateY(-10px) rotate(-3deg);
      opacity: 0;
    }
    to {
      transform: translateX(0) translateY(0) rotate(0deg);
      opacity: 1;
    }
  }

  @keyframes slideInDiagonal5 {
    from {
      transform: translateX(-20px) translateY(-5px) rotate(3deg);
      opacity: 0;
    }
    to {
      transform: translateX(0) translateY(0) rotate(0deg);
      opacity: 1;
    }
  }

  /* Responsive para modo desktop */
  @media (max-width: 1200px) and (min-width: 1024px) {
    header {
      height: 50vh;
      min-height: 350px;
    }
    
    .hero-section {
      height: 50vh;
      min-height: 350px;
    }
    
    .header-content {
      width: 40%;
      padding: 0 3%;
    }
    
    .imagenes-header {
      width: 60%;
    }
    
    .title-slide {
      font-size: 3rem;
    }
    
    .subtitle-slide {
      font-size: 1.2rem;
    }
  }

  @media (max-width: 768px) {
    header {
      height: 40vh;
      min-height: 300px;
    }
    
    .hero-section {
      height: 40vh;
      min-height: 300px;
    }
  }

  @media (max-width: 480px) {
    header {
      height: 35vh;
      min-height: 250px;
    }
    
    .hero-section {
      height: 35vh;
      min-height: 250px;
    }
  }

  /* Accesibilidad */
  @media (prefers-reduced-motion: reduce) {
    * { 
      animation: none !important; 
      transition: none !important; 
    }
    
    .slider-img {
      transition: none !important;
    }
    
    .images {
      transition: none !important;
    }
  }

  /* Focus states para accesibilidad */
  .menu-toggle:focus,
  .cart-button:focus,
  .scroll-down-btn:focus,
  .carousel-indicator:focus,
  .slider-indicator:focus {
    outline: 2px solid var(--hero-accent);
    outline-offset: 2px;
  }
</style>

<script>

  // Función para manejar el carrusel del hero móvil
  class HeroCarousel {
    constructor() {
      this.images = document.querySelectorAll('.hero-image');
      this.indicators = document.querySelectorAll('.carousel-indicator');
      this.currentSlide = 0;
      this.totalSlides = this.images.length;
      this.autoPlayInterval = null;
      this.isAutoPlaying = true;
      
      console.log('[HEADER] Carrusel encontrado:', this.totalSlides, 'imágenes');
      
      if (this.totalSlides > 0) {
        this.init();
      }
    }
    
    init() {
      this.bindEvents();
      this.startAutoPlay();
    }
    
    bindEvents() {
      // Eventos de los indicadores
      this.indicators.forEach((indicator, index) => {
        indicator.addEventListener('click', () => this.goToSlide(index));
      });
      
      // Pausar en hover
      const heroSection = document.querySelector('.hero--mobile');
      if (heroSection) {
        heroSection.addEventListener('mouseenter', () => this.pauseAutoPlay());
        heroSection.addEventListener('mouseleave', () => this.resumeAutoPlay());
      }
    }
    
    startAutoPlay() {
      console.log('[HEADER] Iniciando auto-play del carrusel...');
      this.autoPlayInterval = setInterval(() => {
        if (this.isAutoPlaying) {
          this.nextSlide();
        }
      }, 5000); // Cambiar cada 5 segundos
    }
    
    pauseAutoPlay() {
      this.isAutoPlaying = false;
    }
    
    resumeAutoPlay() {
      this.isAutoPlaying = true;
    }
    
    nextSlide() {
      this.currentSlide = (this.currentSlide + 1) % this.totalSlides;
      console.log('[HEADER] Cambiando a slide:', this.currentSlide);
      this.updateCarousel();
    }
    
    goToSlide(index) {
      this.currentSlide = index;
      this.updateCarousel();
    }
    
    updateCarousel() {
      // Actualizar imágenes
      this.images.forEach((image, index) => {
        image.classList.toggle('active', index === this.currentSlide);
      });
      
      // Actualizar indicadores
      this.indicators.forEach((indicator, index) => {
        indicator.classList.toggle('active', index === this.currentSlide);
        indicator.setAttribute('aria-selected', index === this.currentSlide);
      });
    }
  }

  // Función para actualizar el contador del carrito
  async function updateCartCount() {
    try {
      const response = await fetch('/api/cart.json');
      const cart = await response.json();
      const totalItems = cart.items.reduce((total, item) => total + item.quantity, 0);
      
      const cartButton = document.querySelector('.cart-button');
      const existingBadge = cartButton.querySelector('.cart-badge');
      
      if (totalItems > 0) {
        if (existingBadge) {
          existingBadge.textContent = totalItems;
        } else {
          const badge = document.createElement('span');
          badge.className = 'cart-badge';
          badge.setAttribute('aria-label', `${totalItems} productos en el carrito`);
          badge.textContent = totalItems;
          cartButton.appendChild(badge);
        }
      } else if (existingBadge) {
        existingBadge.remove();
      }
    } catch (error) {
      console.log('Error al actualizar carrito:', error);
    }
  }

  // Inicialización cuando el DOM esté listo
  document.addEventListener('DOMContentLoaded', () => {
    // Inicializar carrusel del hero móvil
    new HeroCarousel();
    
    // Eventos del menú y carrito
    const menuToggle = document.querySelector('.menu-toggle');
    const cartButton = document.querySelector('.cart-button');
    // Botón scroll eliminado
    
    if (menuToggle) {
      menuToggle.addEventListener('click', () => {
        const isExpanded = menuToggle.getAttribute('aria-expanded') === 'true';
        menuToggle.setAttribute('aria-expanded', !isExpanded);
        // Aquí puedes agregar la lógica para abrir/cerrar el menú
      });
    }
    
    if (cartButton) {
      cartButton.addEventListener('click', () => {
        // Abrir el carrito
        const cartToggle = document.querySelector('.cart-toggle');
        if (cartToggle) {
          cartToggle.click();
        }
      });
    }
    
    // Eventos del botón scroll eliminados
    
    // Actualizar contador del carrito cada 5 segundos
    updateCartCount();
    setInterval(updateCartCount, 5000);
    
    
    // Función scrollToFeatured eliminada
  });
</script>